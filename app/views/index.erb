
    <div class="horizontal_panel">
      <div class="top_story">
        <h2>
        theCloud  <small> <%= @date %> </small>
        </h2>
      </div>
    </div>
    <div class="container">
      <div id="top_5">
        <% @top_stories.each do |story| %>
          <h3><%= story.title %></h3>
          <div class="story">
            <p><%= story.content %></p>
            <p>posted by <a href='/user/<%= story.user_name %>'><%= story.user_name %></a></p>
            <p><%= distance_of_time_in_words(story.created_at, Time.now, include_seconds: true) %> ago</p>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<div id="map-container">
  <div id="map-loading"></div>
  <div class="hidden map_canvas" id="map-canvas"></div>
</div>

<div class="mission_statement">

  <h2>
    Share With Each Other...
  </h2>
</div>

<div class="story_feed" id="content">
<script>
$(function(){
  $('#content').scrollPagination({
    'contentPage': '/content_demo', // the url you are fetching the results
    'contentData': {}, // these are the variables you can pass to the request, for example: children().size() to know which page you are
    'scrollTarget': $(window), // who gonna scroll? in this example, the full window
    'heightOffset': 10, // it gonna request when scroll is 10 pixels before the page ends
    'beforeLoad': function(){ // before load function, you can display a preloader div
      $('#loading').fadeIn(); 
    },
    'afterLoad': function(elementsLoaded){ // after loading content, you can use this function to animate your new elements
       $('#loading').fadeOut();
       var i = 0;
       $(elementsLoaded).fadeInWithDelay();
       if ($('#content').children().size() > 100){ // if more than 100 results already loaded, then stop pagination (only for testing)
        $('#nomoreresults').fadeIn();
        $('#content').stopScrollPagination();
       }
    }
  });
  
  // code for fade in element by element
  $.fn.fadeInWithDelay = function(){
    var delay = 0;
    return this.each(function(){
      $(this).delay(delay).animate({opacity:1}, 200);
      delay += 100;
    });
  };
       
});
</script>
</div>
<script type="text/javascript" src="javascript/map.js"></script>


 